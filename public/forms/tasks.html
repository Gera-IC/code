<!--
	It depends on "code editor"
-->

<div data---="panel__common.form__if:tasks;width:350;title:@(To-Do List);icon:tasks;reload:codetasks/reload;bg:false;autofocus:true;bottom:84;top:49" class="hidden">
	<div data---="viewbox__codetasks__height:100;margin:51;parent:.ui-panel">
		<div data-bind="!codetasks.todo__template">
			<script type="text/html">
				{{ if value && value.length }}
				<div class="todolist">
					<div>
					{{ foreach m in value }}
						<div class="todo">
							<div class="exec" data-exec="codetasks/go" data-line="{{ m.line }}" data-ch="{{ m.ch }}"><span>:{{ m.line }}</span>{{ m.name }}</div>
						</div>
					{{ end }}
					</div>
				</div>
				{{ fi }}
			</script>
		</div>
	</div>
</div>

<script>
	PLUGIN('codetasks', function(exports) {

		exports.reload = function() {
			// nothing to do
		};

		exports.go = function(el) {
			var editor = FIND('editor').editor;
			editor.setCursor({ line: (+el.attrd('line')) - 1, ch: +el.attrd('ch') });
			editor.focus();
		};
	})
</script>